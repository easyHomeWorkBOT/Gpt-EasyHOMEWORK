<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Easy Homework GPT</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #6a00ff, #9d4edd);
  height: 100vh;
}
.app {
  display: flex;
  height: 100vh;
}
.sidebar {
  width: 260px;
  background: rgba(0,0,0,0.3);
  color: white;
  padding: 15px;
}
.sidebar h2 {
  margin-top: 0;
}
.sidebar button {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
  background: #7b2cff;
  border: none;
  color: white;
  border-radius: 8px;
}
.chat {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: #f4f4f4;
}
#messages {
  flex: 1;
  padding: 15px;
  overflow-y: auto;
}
.message {
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 10px;
}
.user {
  background: #d0bfff;
  align-self: flex-end;
}
.bot {
  background: #ffffff;
}
.input-area {
  display: flex;
  padding: 10px;
  background: white;
}
.input-area input[type="text"] {
  flex: 1;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
}
.input-area input[type="file"] {
  margin-right: 10px;
}
.input-area button {
  margin-left: 10px;
  padding: 10px 15px;
  border: none;
  background: #6a00ff;
  color: white;
  border-radius: 8px;
}
</style>
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <h2>Easy Homework GPT</h2>
    <button id="newChat">+ –ù–æ–≤–∏–π —á–∞—Ç</button>
    <input type="text" id="searchChat" placeholder="–ü–æ—à—É–∫ —É —á–∞—Ç–∞—Ö">
    <div class="chats" id="chatList"></div>
  </aside>
  <main class="chat">
    <div id="messages"></div>
    <div class="input-area">
      <input type="file" id="imageUpload" accept="image/*">
      <input type="text" id="userInput" placeholder="–ù–∞–ø–∏—à–∏ –ø–∏—Ç–∞–Ω–Ω—è...">
      <button id="send">‚ñ∂</button>
    </div>
  </main>
</div>
<script>
const messages = document.getElementById("messages");
const input = document.getElementById("userInput");
const send = document.getElementById("send");
const imageUpload = document.getElementById("imageUpload");
const chatList = document.getElementById("chatList");
const searchChat = document.getElementById("searchChat");

let chats = JSON.parse(localStorage.getItem("chats") || "[]");
let messagesHistory = JSON.parse(localStorage.getItem("messages") || "[]");

// –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
messagesHistory.forEach(m => addMessage(m.text, m.type, false));
updateChatList();

function addMessage(text, type, save=true) {
  const div = document.createElement("div");
  div.className = `message ${type}`;
  div.innerText = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
  
  if(type === "user") {
    chats.push(text);
    if(save) {
      messagesHistory.push({text,type});
      localStorage.setItem("chats", JSON.stringify(chats));
      localStorage.setItem("messages", JSON.stringify(messagesHistory));
      updateChatList();
    }
  }
  if(type === "bot" && save) {
    messagesHistory.push({text,type});
    localStorage.setItem("messages", JSON.stringify(messagesHistory));
  }
}

function updateChatList() {
  chatList.innerHTML = "";
  chats.forEach(c => {
    const div = document.createElement("div");
    div.innerText = c;
    div.style.cursor = "pointer";
    div.onclick = () => { input.value = c; };
    chatList.appendChild(div);
  });
}

send.onclick = () => {
  if(!input.value) return;
  addMessage(input.value,"user");
  setTimeout(()=> {
    addMessage("–Ø Easy Homework GPT ü§ñ. –í—ñ–¥–ø–æ–≤—ñ–¥—å –∑‚Äô—è–≤–∏—Ç—å—Å—è —Ç—É—Ç.", "bot");
  },600);
  input.value="";
};

imageUpload.onchange = () => {
  if(imageUpload.files.length === 0) return;
  addMessage("–§–æ—Ç–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ: " + imageUpload.files[0].name, "user");
  setTimeout(()=> {
    addMessage("–û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ç–æ... (—Ç–µ—Å—Ç–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å)", "bot");
  },800);
  imageUpload.value="";
};

searchChat.oninput = () => {
  const term = searchChat.value.toLowerCase();
  chatList.innerHTML = "";
  chats.filter(c => c.toLowerCase().includes(term)).forEach(c => {
    const div = document.createElement("div");
    div.innerText = c;
    div.style.cursor="pointer";
    div.onclick = () => { input.value = c; };
    chatList.appendChild(div);
  });
};

document.getElementById("newChat").onclick = () => {
  messages.innerHTML="";
  input.value="";
  messagesHistory = [];
  localStorage.setItem("messages", JSON.stringify(messagesHistory));
};
</script>
</body>
</html>
